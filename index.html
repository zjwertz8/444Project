<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Ole Miss Parking Citation Visualization</title>
    <link rel="stylesheet" href="stylesheets/styles.css">
    <script src="http://maps.google.com/maps/api/js?sensor=True"></script>

  </head>
<body>
<h1>Ole Miss Parking Citation Visualization</h1>
<script type="text/javascript" src="d3.min.js"></script>
<script type="text/javascript" src="d3/d3.min.js"></script>
<script src="https://d3js.org/d3-scale-chromatic.v1.min.js"></script>
<div id="map-container">
<div id="map"></div>
<script>

var map = new google.maps.Map(d3.select("#map").node(), {
               zoom: 15,
               center: new google.maps.LatLng(34.364732, -89.538443),
               mapTypeId: google.maps.MapTypeId.ROADMAP
             });


d3.csv("FullDataRaw.csv", function(data) {
  var lotCount = d3.nest()
     .key(function(d) {return d.CLM_DESCRIPTION;})
     .rollup(function(v) { return v.length;})
     .entries(data)

  console.log(lotCount)
  // console.log(lotCount[0])
  console.log(lotCount[0].key)


// var gradient = d3.scaleSequential().domain([0,10]).interpolator(d3.interpolatePlasma);

var gradient = d3.scaleLinear().domain([0,10]).range(["orange", "red"]);
// var gradient = d3.scaleSequential(d3.interpolateReds).domain([0,10]);


//function to find key in array, give correct fill color
function fillColor(lotCount, param)
{
  for(i = 0; i < lotCount.length; i++)
  {
  if(lotCount[i].key == param)
    {
      return lotCount[i].value;
    }
  }
}

//Jackson Avenue
jacksonAveLatLong =
[
{"lat": 34.368872307822194, "lng": -89.54835623502731},
{"lat": 34.36886566597249, "lng": -89.54841256141663},
{"lat": 34.36891880075512, "lng": -89.54855471849442},
{"lat": 34.36902064232761, "lng": -89.54865127801895},
{"lat": 34.36945014672778, "lng": -89.54886049032211},
{"lat": 34.36976895269373, "lng": -89.54888463020325},
{"lat": 34.369534276197754, "lng": -89.54839915037155},
{"lat": 34.36985308184354, "lng": -89.54814702272415},
{"lat": 34.36995713620141, "lng": -89.54807192087173},
{"lat": 34.370096613116694, "lng": -89.54787880182266},
{"lat": 34.37042427225808, "lng":-89.54734236001968},
{"lat": 34.37067222967534, "lng": -89.54681396484375},
{"lat": 34.3708050637041, "lng": -89.54634189605713},
{"lat": 34.370798422007674, "lng": -89.54625874757767},
{"lat": 34.37073643281554, "lng": -89.54615145921707},
{"lat": 34.37072757721292, "lng": -89.5460495352745},
{"lat": 34.370732005014354, "lng": -89.54593151807785},
{"lat": 34.370758571818, "lng": -89.54582959413528},
{"lat": 34.37080949150144, "lng": -89.54575449228287},
{"lat": 34.37082056099375, "lng": -89.54564183950424},
{"lat": 34.370816133196996, "lng": -89.54518854618073},
{"lat": 34.37085376946189, "lng": -89.5450946688652},
{"lat": 34.37052832590648, "lng": -89.54488545656204},
{"lat": 34.37047519214473, "lng": -89.54488277435303},
{"lat": 34.370435341801304, "lng": -89.54489082098007},
{"lat": 34.37037778016064, "lng": -89.5449498295784},
{"lat": 34.37034678541467, "lng": -89.5450222492218},
{"lat": 34.368871569748826, "lng": -89.54835623502731}
];



jacksonAvePoly = new google.maps.Polygon({
  paths: jacksonAveLatLong,
  strokeColor: '#FF0000',
  strokeOpacity: 0.8,
  strokeWeight: 0,
  fillColor: gradient(fillColor(lotCount, "15 MIN TIMED PAK MAIL CROSBY")),
  fillOpacity: 0.35
});


//Sorority
sororityLatLong =
[
{"lat": 34.36913392239193, "lng": -89.53253991901875},
{"lat": 34.36918927094585, "lng": -89.53243933618069},
{"lat": 34.36917266638351, "lng": -89.53238435089588},
{"lat": 34.36918152215051, "lng": -89.53230522572994},
{"lat": 34.369236870672985, "lng": -89.5322073251009},
{"lat": 34.369286684311966, "lng": -89.53211076557636},
{"lat": 34.36928889825079, "lng": -89.53206785023212},
{"lat": 34.36927561461696, "lng": -89.53191764652729},
{"lat": 34.36874426753734, "lng": -89.53197129070759},
{"lat": 34.368470843872664, "lng": -89.53200213611126},
{"lat": 34.36849851837325, "lng": -89.53212954103947},
{"lat": 34.36850183931271, "lng": -89.53215904533863},
{"lat": 34.36852397890571, "lng": -89.5321885496378},
{"lat": 34.36856161620037, "lng": -89.53222341835499},
{"lat": 34.36859039764961, "lng": -89.5322623103857},
{"lat": 34.36860368139206, "lng": -89.5323521643877},
{"lat": 34.36859593254255, "lng": -89.5323870331049},
{"lat": 34.36858154182012, "lng": -89.53241921961308},
{"lat": 34.36855386734699, "lng": -89.53246749937534},
{"lat": 34.368526192864685, "lng": -89.53249834477901},
{"lat": 34.368526192864685, "lng": -89.53249767422676},
{"lat": 34.36851069515059, "lng": -89.53252114355564},
{"lat": 34.36850958817092, "lng": -89.53254528343678},
{"lat": 34.36851180213028, "lng": -89.53260160982609},
{"lat": 34.36852840682361, "lng": -89.53265525400639},
{"lat": 34.36858154182012, "lng": -89.53265525400639},
{"lat": 34.3691372433062, "lng": -89.53261904418468},
{"lat": 34.36913392239193, "lng": -89.53253924846649}
];

sororityPoly = new google.maps.Polygon({
  paths: sororityLatLong,
  strokeColor: '#FF0000',
  strokeOpacity: 0.8,
  strokeWeight: 0,
  fillColor: gradient(fillColor(lotCount, "15 MIN TIMED PAK MAIL CROSBY")),
  fillOpacity: 0.35
 });

//Coliseum East
coliseumEastLatLong =
[
{"lat": 34.363540651798374, "lng": -89.53974527114042},
{"lat": 34.36371777886659, "lng": -89.53922760480054},
{"lat": 34.36372353546975, "lng": -89.53920091695181},
{"lat": 34.36371357208278, "lng": -89.53919018811575},
{"lat": 34.363699734043365, "lng": -89.53918348259322},
{"lat": 34.363360424601915, "lng": -89.53901718555244},
{"lat": 34.36329234113901, "lng": -89.53898499904426},
{"lat": 34.36322149001383, "lng": -89.53896220026763},
{"lat": 34.36313015837512, "lng": -89.53894744811805},
{"lat": 34.36308919745286, "lng": -89.53894275425228},
{"lat": 34.36299177688088, "lng": -89.53894744811805},
{"lat": 34.36292867486747, "lng": -89.53895482419284},
{"lat": 34.36290542674218, "lng": -89.53896152971538},
{"lat": 34.362893802677135, "lng": -89.53897829352172},
{"lat": 34.362870554537956, "lng": -89.5390366315678},
{"lat": 34.36285062756, "lng": -89.53911709783824},
{"lat": 34.362859483995216, "lng": -89.53913117943557},
{"lat": 34.362859373295706, "lng": -89.53913144767284},
{"lat": 34.36285893046804, "lng": -89.53914459048065},
{"lat": 34.36285284166889, "lng": -89.53915800152572},
{"lat": 34.36284177112382, "lng": -89.53916805980953},
{"lat": 34.362810220062364, "lng": -89.5392002463177},
{"lat": 34.36280247067702, "lng": -89.53921164570602},
{"lat": 34.362805238314735, "lng": -89.53922438619884},
{"lat": 34.36281686239207, "lng": -89.53924182055744},
{"lat": 34.362920371966325, "lng": -89.53938934205325},
{"lat": 34.36298845573357, "lng": -89.53945840901724},
{"lat": 34.3630559859175, "lng": -89.53950937098853},
{"lat": 34.36320875891756, "lng": -89.53959050781123},
{"lat": 34.36335987107805, "lng": -89.5396662802159},
{"lat": 34.36353301315813, "lng": -89.5397587493062}
];

coliseumEastPoly = new google.maps.Polygon({
  paths: coliseumEastLatLong,
  strokeColor: '#FF0000',
  strokeOpacity: 0.8,
  strokeWeight: 0,
  fillColor: gradient(fillColor(lotCount, "15 MIN TIMED PAK MAIL CROSBY")),
  fillOpacity: 0.35
 });


//Crosby Rear
crosyRearLatLong = [
  {"lat": 34.369766, "lng": -89.534701},
  {"lat": 34.370179, "lng": -89.534662},
  {"lat": 34.370126, "lng": -89.535075},
  {"lat": 34.370226, "lng": -89.535105},
  {"lat": 34.370354, "lng": -89.535094},
  {"lat": 34.371093, "lng": -89.534949},
  {"lat": 34.371634, "lng": -89.534853},
  {"lat": 34.371532, "lng": -89.534051},
  {"lat": 34.371321, "lng": -89.534088},
  {"lat": 34.371271, "lng": -89.533756},
  {"lat": 34.37075, "lng": -89.533866},
  {"lat": 34.370788, "lng": -89.534193},
  {"lat": 34.370206, "lng": -89.534273},
  {"lat": 34.37018, "lng": -89.534661}
];


crosbyRearPoly = new google.maps.Polygon({
  paths: crosyRearLatLong,
  strokeColor: '#FF0000',
  strokeOpacity: 0.8,
  strokeWeight: 0,
  // fillColor: gradient(10),
  fillColor: gradient(fillColor(lotCount, "15 MINUTE FORD CENTER")),
  fillOpacity: 0.35
});


//Stockard Rear
stockardRearLatLong = [
  {"lat": 34.370356, "lng": -89.53791},
  {"lat": 34.370093, "lng": -89.537935},
  {"lat": 34.369789, "lng": -89.538047},
  {"lat": 34.369513, "lng": -89.537318},
  {"lat": 34.369475, "lng": -89.537076},
  {"lat": 34.369471, "lng": -89.53676},
  {"lat": 34.369648, "lng": -89.536148},
  {"lat": 34.370084, "lng": -89.536052},
  {"lat": 34.370432, "lng": -89.535987},
  {"lat": 34.370456, "lng": -89.536559},
  {"lat": 34.370432, "lng": -89.537739}
];

stockardRearPoly = new google.maps.Polygon({
  paths: stockardRearLatLong,
  strokeColor: '#FF0000',
  strokeOpacity: 0.8,
  strokeWeight: 0,
  // fillColor: gradient(10),
  fillColor: gradient(fillColor(lotCount, "15 MINUTE FORD CENTER")),
  fillOpacity: 0.35
});

//Stockard Rear
MeekLatLong = [
  {"lat": 34.367382, "lng": -89.537515},
  {"lat": 34.367322, "lng": -89.537552},
  {"lat": 34.367258, "lng": -89.537576},
  {"lat": 34.367211, "lng": -89.537593},
  {"lat": 34.367131, "lng": -89.537622},
  {"lat": 34.367063, "lng": -89.537638},
  {"lat": 34.367003, "lng": -89.537649},
  {"lat": 34.366956, "lng": -89.537649},
  {"lat": 34.366881, "lng": -89.537668},
  {"lat": 34.366837, "lng": -89.53767},
  {"lat": 34.366819, "lng": -89.537456},
  {"lat": 34.366802, "lng": -89.537244},
  {"lat": 34.366773, "lng": -89.537027},
  {"lat": 34.366952, "lng": -89.537002},
  {"lat": 34.367078, "lng": -89.536984},
  {"lat": 34.367251, "lng": -89.53696},
  {"lat": 34.367302, "lng": -89.537099},
  {"lat": 34.367351, "lng": -89.537255},
  {"lat": 34.367388, "lng": -89.537378},
  {"lat": 34.367419, "lng": -89.537488},
  {"lat": 34.367381, "lng": -89.537515}

];

MeekPoly = new google.maps.Polygon({
  paths: MeekLatLong,
  strokeColor: '#FF0000',
  strokeOpacity: 0.8,
  strokeWeight: 0,
  // fillColor: gradient(10),
  fillColor: gradient(fillColor(lotCount, "MEEK LOT")),
  fillOpacity: 0.35
});


//Manning Center East
manningCenterLatLong =
[
{"lat": 34.35957910706344, "lng": -89.5358718931675},
{"lat": 34.360630843262136, "lng": -89.53505381941795},
{"lat": 34.36068841159937, "lng": -89.53474536538124},
{"lat": 34.36065298493497, "lng": -89.53473463654518},
{"lat": 34.36065298493497, "lng": -89.53473329544067},
{"lat": 34.36064855660088, "lng": -89.53468099236488},
{"lat": 34.360668484102504, "lng": -89.53457102179527},
{"lat": 34.36065741326886, "lng": -89.53451737761497},
{"lat": 34.360635271597175, "lng": -89.53447178006172},
{"lat": 34.3605976307419, "lng": -89.53445836901665},
{"lat": 34.3605976307419, "lng": -89.53445702791214},
{"lat": 34.360564418208504, "lng": -89.53447714447975},
{"lat": 34.36053563400226, "lng": -89.53443959355354},
{"lat": 34.36017029514065, "lng": -89.534702450037},
{"lat": 34.36019022275599, "lng": -89.53476145863533},
{"lat": 34.36019022275599, "lng": -89.53476011753082},
{"lat": 34.36019022275599, "lng": -89.53476011753082},
{"lat": 34.36019022275599, "lng": -89.53476011753082},
{"lat": 34.36019022275599, "lng": -89.53476011753082},
{"lat": 34.36019022275599, "lng": -89.53476011753082},
{"lat": 34.36019022275599, "lng": -89.53476011753082},
{"lat": 34.36016586678104, "lng": -89.53478090465069},
{"lat": 34.36005515771482, "lng": -89.53486807644367},
{"lat": 34.36005515771482, "lng": -89.53486740589142},
{"lat": 34.36005515771482, "lng": -89.53486740589142},
{"lat": 34.3600308017006, "lng": -89.5348734408617},
{"lat": 34.36001419532324, "lng": -89.53482650220394},
{"lat": 34.35989795058945, "lng": -89.53492172062397},
{"lat": 34.35991455698987, "lng": -89.53496865928173},
{"lat": 34.35985255974488, "lng": -89.53502900898457},
{"lat": 34.359880237092064, "lng": -89.53508533537388},
{"lat": 34.35991898536277, "lng": -89.53513897955418},
{"lat": 34.35955253671487, "lng": -89.53542731702328},
{"lat": 34.35957357157485, "lng": -89.5354675501585},
{"lat": 34.35954257283196, "lng": -89.53551985323429},
{"lat": 34.359499395992394, "lng": -89.53550107777119},
{"lat": 34.359457326229894, "lng": -89.53564055263996},
{"lat": 34.359447362335686, "lng": -89.53577734529972},
{"lat": 34.3594971817949, "lng": -89.53579343855381},
{"lat": 34.359556965106876, "lng": -89.53582964837551},
{"lat": 34.35957910706344, "lng": -89.5358718931675}
];

manningCenterPoly = new google.maps.Polygon({
  paths: manningCenterLatLong,
  strokeColor: '#FF0000',
  strokeOpacity: 0.8,
  strokeWeight: 0,
  // fillColor: gradient(10),
  fillColor: gradient(fillColor(lotCount, "15 MINUTE FORD CENTER")),
  fillOpacity: 0.35
});


magnoliaLatLong =
[
{"lat": 34.366137297100316, "lng": -89.54212814569473},
{"lat": 34.365949105012334, "lng": -89.54017549753189},
{"lat": 34.36573434411314, "lng": -89.54019159078598},
{"lat": 34.365969031253414, "lng": -89.54215966165066},
{"lat": 34.366125119977994, "lng": -89.54212948679924}
]

magnoliaPoly = new google.maps.Polygon({
  paths: magnoliaLatLong,
  strokeColor: '#FF0000',
  strokeOpacity: 0.8,
  strokeWeight: 0,
  // fillColor: gradient(10),
  fillColor: gradient(fillColor(lotCount, "15 MINUTE FORD CENTER")),
  fillOpacity: 0.35
});


residentialCollegeLatLng =
[
{"lat": 34.36742806202902, "lng": -89.53018963336945},
{"lat": 34.36748341170995, "lng": -89.53014738857746},
{"lat": 34.36753101240631, "lng": -89.53016884624958},
{"lat": 34.36765720947041, "lng": -89.52986977994442},
{"lat": 34.367746875689924, "lng": -89.52988587319851},
{"lat": 34.36776790849295, "lng": -89.52981613576412},
{"lat": 34.36780001118212, "lng": -89.52986307442188},
{"lat": 34.36784318374471, "lng": -89.52983357012272},
{"lat": 34.36780443913829, "lng": -89.52976651489735},
{"lat": 34.36785978857055, "lng": -89.52977992594242},
{"lat": 34.367905175077766, "lng": -89.52952243387699},
{"lat": 34.36791956591637, "lng": -89.52920861542225},
{"lat": 34.36787307242887, "lng": -89.52920861542225},
{"lat": 34.367858681582284, "lng": -89.52918045222759},
{"lat": 34.3678409697677, "lng": -89.52915631234646},
{"lat": 34.367815509027665, "lng": -89.5291469246149},
{"lat": 34.36779004827989, "lng": -89.5291455835104},
{"lat": 34.36779004827989, "lng": -89.52914491295815},
{"lat": 34.367778978387165, "lng": -89.52908255159855},
{"lat": 34.36760850185416, "lng": -89.52909596264362},
{"lat": 34.3676151438035, "lng": -89.52923946082592},
{"lat": 34.36764613956012, "lng": -89.52926896512508},
{"lat": 34.367625106726514, "lng":-89.52928639948368},
{"lat": 34.36759411096212, "lng": -89.52928639948368},
{"lat": 34.367581934051536, "lng": -89.52949024736881},
{"lat": 34.367540975339324, "lng": -89.52971287071705},
{"lat": 34.36742806202902, "lng": -89.53001193702221},
{"lat": 34.3674668068095, "lng": -89.5300454646349},
{"lat": 34.367463485829035, "lng": -89.53006826341152},
{"lat": 34.36743913196813, "lng": -89.53007496893406},
{"lat": 34.36740702914067, "lng": -89.5301366597414},
{"lat": 34.36742806202902, "lng": -89.53018963336945}
]

residentialCollegePoly = new google.maps.Polygon({
  paths: residentialCollegeatLong,
  strokeColor: '#FF0000',
  strokeOpacity: 0.8,
  strokeWeight: 0,
  // fillColor: gradient(10),
  fillColor: gradient(fillColor(lotCount, "15 MINUTE FORD CENTER")),
  fillOpacity: 0.35
});

kincannonLatLong =[
{"lat": 34.369766, "lng": -89.534701},
{"lat": 34.369225, "lng": -89.53769},
{"lat": 34.36938, "lng": -89.537613},
{"lat": 34.369608, "lng": -89.53827},
{"lat": 34.369557, "lng": -89.53916},
{"lat": 34.368705, "lng": -89.5393},
{"lat": 34.368543, "lng": -89.539214},
{"lat": 34.368499, "lng": -89.53919},
{"lat": 34.368499, "lng": -89.538903},
{"lat": 34.368512, "lng": -89.538452},
{"lat": 34.36853, "lng": -89.538205},
{"lat": 34.368541, "lng": -89.537994},
{"lat": 34.368559, "lng": -89.537926},
{"lat": 34.368674, "lng": -89.537953},
{"lat": 34.368875, "lng": -89.538055},
{"lat": 34.369021, "lng": -89.538181},
{"lat": 34.369207, "lng": -89.538227},
{"lat": 34.369382, "lng": -89.538136}];

kincannonPoly = new google.maps.Polygon({
  paths: residentialCollegeatLong,
  strokeColor: '#FF0000',
  strokeOpacity: 0.8,
  strokeWeight: 0,
  // fillColor: gradient(10),
  fillColor: gradient(fillColor(lotCount, "15 MINUTE FORD CENTER")),
  fillOpacity: 0.35
});


jacksonAvePoly.setMap(map);
sororityPoly.setMap(map);
coliseumEastPoly.setMap(map);
crosbyRearPoly.setMap(map);
stockardRearPoly.setMap(map);
manningCenterPoly.setMap(map);
MeekPoly.setMap(map);
magnoliaPoly.setMap(map);
residentialCollegePoly.setMap(map);
kincannonPoly.setMap(map);

});
</script>
</div>
  </body>
</html>
